"use client";

import { app_theme } from "@/lib/atoms";
import { IMAGES, PAGES, MAJOR_CATEGORIES } from "@/lib/constants";
import { useAtomValue } from "jotai";
import Image from "next/image";
import ThemeToggle from "./general/theme-toggle";
import Sidebar from "./general/sidebar";
import { cn } from "@/lib/utils";
import { domine } from "@/lib/fonts";
import Link from "next/link";
import IdeaSubmission from "./general/idea-submission";
import { useEffect, useRef, useState } from "react";
import { FaYoutube } from "react-icons/fa";
import { usePathname } from "next/navigation";
import { getWeather } from "@/lib/requests";

const Header = () => {
  const theme = useAtomValue(app_theme);

  const pathname = usePathname();

  const shouldShowLogo = true;
  const [weather, setWeather] = useState({ temp: 0, condition: "" });
  const [isLargeHeaderVisible, setIsLargeHeaderVisible] = useState(true);
  const [isLargeScreen, setIsLargeScreen] = useState(true);
  const largeHeaderRef = useRef<HTMLDivElement | null>(null);

  const logo =
    theme === "dark"
      ? IMAGES.logos.engravers_old_eng_white
      : IMAGES.logos.big_moore_gold;

  const date = new Date().toLocaleDateString("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
    weekday: "long",
  });

  useEffect(() => {
    const fetchWeather = async () => {
      const weather = await getWeather();

      setWeather(weather);
    };

    fetchWeather();
  }, []);

  useEffect(() => {
    if (!largeHeaderRef.current) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        setIsLargeHeaderVisible(entry.isIntersecting);
      },
      {
        root: null,
        threshold: 0,
        rootMargin: "0px",
      }
    );

    observer.observe(largeHeaderRef.current);

    return () => {
      if (largeHeaderRef.current) observer.unobserve(largeHeaderRef.current);
    };
  }, []);

  useEffect(() => {
    const handleResize = () => {
      setIsLargeScreen(window.innerWidth >= 1024);
    };

    handleResize();
    window.addEventListener("resize", handleResize);

    return () => {
      window.removeEventListener("resize", handleResize);
    };
  }, []);

  // Show small header when large header is off screen OR on small screens
  const showSmallHeader = !isLargeHeaderVisible || !isLargeScreen;

  return (
    <>
      {/* Small Header - slides down from top when needed */}
      <header
        className={cn(
          "fixed top-0 z-50 w-full dark:bg-black bg-white border flex items-center justify-between py-4 px-6 gap-4 transition-transform duration-300",
          showSmallHeader ? "translate-y-0" : "-translate-y-full"
        )}
      >
        <Sidebar />

        <div
          className={cn(
            "flex items-center justify-center flex-col gap-1 transition-all",
            shouldShowLogo ? "" : "lg:opacity-0"
          )}
        >
          <Link href={PAGES.home}>
            <Image
              src={logo.src}
              alt="The Babcock Torch"
              width={logo.width}
              height={logo.height}
              className={cn(
                "w-40 sm:w-48 h-auto",
                theme === "dark" ? "mb-0" : "lg:mb-2"
              )}
            />
          </Link>

          <p
            className={cn(
              "text-xs text-muted-foreground hidden sm:block",
              domine.className
            )}
          >
            The University Daily, Est. 2025
          </p>
        </div>

        <div className="flex items-center justify-center gap-4">
          <ThemeToggle />
        </div>
      </header>

      {/* Large Header - main header section */}
      <div
        ref={largeHeaderRef}
        className="w-full dark:bg-black bg-white border-b hidden lg:block"
      >
        {/* Top section with date, logo, and buttons */}
        <div className="w-full max-w-7xl mx-auto px-6 pt-6 pb-4">
          <div className="flex items-center justify-between">
            {/* Left: Date and Weather */}
            <div className="flex flex-col gap-1.5">
              <p className="whitespace-nowrap text-sm font-medium">{date}</p>

              {weather.temp !== 0 && (
                <p className="whitespace-nowrap text-sm font-medium">
                  {Math.floor(weather.temp)} Â°C | {weather.condition}
                </p>
              )}

              <Sidebar />
            </div>

            {/* Center: Large Logo */}
            <div className="flex items-center justify-center flex-col gap-1">
              <Link href={PAGES.home}>
                <Image
                  src={logo.src}
                  alt="The Babcock Torch"
                  width={logo.width}
                  height={logo.height}
                  className={cn(
                    "w-96 h-auto",
                    theme === "dark" ? "mb-0" : "mb-3"
                  )}
                />
              </Link>
              <p className={cn("text-sm", domine.className)}>
                The University Daily, Est. 2025
              </p>
            </div>

            {/* Right: Talk to the Torch and Theme Toggle */}
            <div className="flex flex-col items-end gap-3">
              <IdeaSubmission />
              <ThemeToggle />
            </div>
          </div>
        </div>

        {/* Navigation Menu */}
        <nav className="w-full border-t border-b">
          <div className="w-full max-w-7xl mx-auto px-6 flex items-center justify-center">
            {MAJOR_CATEGORIES.map((category, i) => (
              <Link href={category.href} key={i}>
                <div
                  className={cn(
                    "px-4 py-3 text-sm font-medium border-b-2 border-transparent hover:border-primary transition-colors cursor-pointer",
                    pathname === category.href
                      ? "border-primary font-semibold"
                      : ""
                  )}
                >
                  {category.name}
                </div>
              </Link>
            ))}
          </div>
        </nav>

        {pathname === PAGES.home && (
          <div className="w-full bg-muted/30 border-t">
            <div className="w-full max-w-5xl mx-auto px-6 py-4 grid grid-cols-3 gap-6">
              <Link
                href="https://www.youtube.com/@babcocktorch"
                target="_blank"
                rel="noopener noreferrer"
                className="flex items-center gap-3 hover:opacity-80 transition-opacity"
              >
                <FaYoutube className="w-9 h-auto text-gold dark:text-white" />

                <span className="font-medium">Subscribe to The Torch</span>
              </Link>

              <Link
                href={PAGES.home}
                className="flex items-center gap-3 hover:opacity-80 transition-opacity"
              >
                <svg
                  className="w-7 h-auto text-gold dark:text-white"
                  viewBox="0 0 35 33"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M3.8623 9.8001C3.31543 9.24896 2.89958 8.62317 2.61475 7.92276C2.32992 7.22234 2.1875 6.48747 2.1875 5.71816C2.1875 4.90292 2.33561 4.15084 2.63184 3.4619C2.92806 2.77296 3.33252 2.17015 3.84521 1.65344C4.35791 1.13674 4.96745 0.734864 5.67383 0.447808C6.38021 0.160752 7.12646 0.0114823 7.9126 0C8.66455 0 9.39372 0.132046 10.1001 0.396138C10.8065 0.66023 11.4331 1.06785 11.98 1.619L18.0127 7.69885L16.4575 9.26618L13.125 5.90762L8.11768 10.9541L11.4502 14.3126L9.89502 15.88L3.8623 9.8001ZM7.92969 2.17015C7.43978 2.17015 6.97835 2.25626 6.54541 2.4285C6.11247 2.60073 5.73649 2.85334 5.41748 3.18633C5.09847 3.51931 4.84782 3.89248 4.66553 4.30585C4.48324 4.71921 4.38639 5.18998 4.375 5.71816C4.375 6.15449 4.43197 6.5334 4.5459 6.85491C4.65983 7.17641 4.82503 7.48069 5.0415 7.76775C5.25798 8.0548 5.49154 8.32463 5.74219 8.57724C5.99284 8.82985 6.26628 9.09969 6.5625 9.38674L11.5698 4.34029C11.2736 4.05324 11.0059 3.77766 10.7666 3.51357C10.5273 3.24948 10.2653 3.01983 9.98047 2.82463C9.69564 2.62944 9.39941 2.46868 9.0918 2.34238C8.78418 2.21608 8.39681 2.15866 7.92969 2.17015ZM35 33L24.1821 30.2787L19.1748 25.2323L20.73 23.6649L24.4385 27.4196C24.6208 26.8225 24.8714 26.2599 25.1904 25.7317C25.5094 25.2036 25.8911 24.7156 26.3354 24.2677C26.7798 23.8199 27.2583 23.441 27.771 23.131C28.2837 22.821 28.8477 22.5626 29.4629 22.3559L25.7373 18.6185L27.2925 17.0511L32.2998 22.0976L35 33ZM31.9922 29.9687L30.5908 24.3022C30.0553 24.417 29.5597 24.6007 29.104 24.8533C28.6483 25.106 28.2324 25.4217 27.8564 25.8006C27.4805 26.1795 27.1672 26.5986 26.9165 27.0579C26.6659 27.5172 26.4836 28.0167 26.3696 28.5564L31.9922 29.9687ZM29.5312 1.0334C30.1351 1.0334 30.6991 1.14823 31.2231 1.37787C31.7472 1.60752 32.2144 1.92328 32.6245 2.32516C33.0347 2.72704 33.348 3.19207 33.5645 3.72025C33.7809 4.24843 33.8949 4.82255 33.9062 5.44259C33.9062 6.02818 33.798 6.59081 33.5815 7.13048C33.3651 7.67015 33.0461 8.14666 32.6245 8.56002L13.0396 28.298C12.937 28.9755 12.7262 29.5955 12.4072 30.1581C12.0882 30.7208 11.6895 31.2203 11.2109 31.6566C10.7324 32.0929 10.1912 32.4201 9.5874 32.6383C8.98356 32.8565 8.33984 32.977 7.65625 33H0V30.7954C0.125326 30.7954 0.256348 30.7782 0.393066 30.7437C0.529785 30.7093 0.655111 30.6576 0.769043 30.5887C1.05387 30.4395 1.28743 30.25 1.46973 30.0204C1.65202 29.7907 1.79443 29.5381 1.89697 29.2625C1.99951 28.987 2.07357 28.6999 2.11914 28.4014C2.16471 28.1028 2.1875 27.7985 2.1875 27.4885C2.1875 26.8111 2.30143 26.1681 2.5293 25.5595C2.75716 24.9509 3.08757 24.3998 3.52051 23.9061C3.95345 23.4123 4.44336 23.0104 4.99023 22.7004C5.53711 22.3904 6.15804 22.178 6.85303 22.0632L26.438 2.32516C26.8481 1.9118 27.321 1.59603 27.8564 1.37787C28.3919 1.15971 28.9502 1.04489 29.5312 1.0334ZM7.65625 30.7954C8.11198 30.7954 8.53923 30.7093 8.93799 30.5371C9.33675 30.3648 9.68425 30.1294 9.98047 29.8309C10.2767 29.5324 10.5103 29.1822 10.6812 28.7803C10.8521 28.3784 10.9375 27.9478 10.9375 27.4885C10.9375 27.0292 10.8521 26.5986 10.6812 26.1968C10.5103 25.7949 10.2767 25.4447 9.98047 25.1461C9.68425 24.8476 9.33675 24.6122 8.93799 24.44C8.53923 24.2677 8.11198 24.1816 7.65625 24.1816C7.20052 24.1816 6.77327 24.2677 6.37451 24.44C5.97575 24.6122 5.62826 24.8476 5.33203 25.1461C5.03581 25.4447 4.80225 25.7949 4.63135 26.1968C4.46045 26.5986 4.375 27.0292 4.375 27.4885C4.375 28.6827 4.01042 29.785 3.28125 30.7954H7.65625ZM16.5088 21.6842C16.1442 20.9609 15.717 20.3523 15.2271 19.8586C14.7371 19.3648 14.1333 18.9342 13.4155 18.5668L9.63867 22.3732C10.3451 22.6487 10.966 23.0564 11.5015 23.596C12.0369 24.1357 12.4471 24.7672 12.7319 25.4906L16.5088 21.6842ZM31.0693 6.99269C31.4909 6.56785 31.7017 6.05115 31.7017 5.44259C31.7017 5.14405 31.6447 4.86273 31.5308 4.59864C31.4168 4.33455 31.263 4.10491 31.0693 3.90971C30.8757 3.71451 30.6421 3.55376 30.3687 3.42745C30.0952 3.30115 29.8161 3.24374 29.5312 3.25522C28.9274 3.25522 28.4147 3.46764 27.9932 3.89248L15.022 16.9478C15.717 17.3612 16.3037 17.809 16.7822 18.2912C17.2607 18.7735 17.7051 19.3648 18.1152 20.0652L31.0693 6.99269Z"
                    fill="#A98105"
                    className="dark:hidden"
                  />
                  <path
                    d="M3.8623 9.8001C3.31543 9.24896 2.89958 8.62317 2.61475 7.92276C2.32992 7.22234 2.1875 6.48747 2.1875 5.71816C2.1875 4.90292 2.33561 4.15084 2.63184 3.4619C2.92806 2.77296 3.33252 2.17015 3.84521 1.65344C4.35791 1.13674 4.96745 0.734864 5.67383 0.447808C6.38021 0.160752 7.12646 0.0114823 7.9126 0C8.66455 0 9.39372 0.132046 10.1001 0.396138C10.8065 0.66023 11.4331 1.06785 11.98 1.619L18.0127 7.69885L16.4575 9.26618L13.125 5.90762L8.11768 10.9541L11.4502 14.3126L9.89502 15.88L3.8623 9.8001ZM7.92969 2.17015C7.43978 2.17015 6.97835 2.25626 6.54541 2.4285C6.11247 2.60073 5.73649 2.85334 5.41748 3.18633C5.09847 3.51931 4.84782 3.89248 4.66553 4.30585C4.48324 4.71921 4.38639 5.18998 4.375 5.71816C4.375 6.15449 4.43197 6.5334 4.5459 6.85491C4.65983 7.17641 4.82503 7.48069 5.0415 7.76775C5.25798 8.0548 5.49154 8.32463 5.74219 8.57724C5.99284 8.82985 6.26628 9.09969 6.5625 9.38674L11.5698 4.34029C11.2736 4.05324 11.0059 3.77766 10.7666 3.51357C10.5273 3.24948 10.2653 3.01983 9.98047 2.82463C9.69564 2.62944 9.39941 2.46868 9.0918 2.34238C8.78418 2.21608 8.39681 2.15866 7.92969 2.17015ZM35 33L24.1821 30.2787L19.1748 25.2323L20.73 23.6649L24.4385 27.4196C24.6208 26.8225 24.8714 26.2599 25.1904 25.7317C25.5094 25.2036 25.8911 24.7156 26.3354 24.2677C26.7798 23.8199 27.2583 23.441 27.771 23.131C28.2837 22.821 28.8477 22.5626 29.4629 22.3559L25.7373 18.6185L27.2925 17.0511L32.2998 22.0976L35 33ZM31.9922 29.9687L30.5908 24.3022C30.0553 24.417 29.5597 24.6007 29.104 24.8533C28.6483 25.106 28.2324 25.4217 27.8564 25.8006C27.4805 26.1795 27.1672 26.5986 26.9165 27.0579C26.6659 27.5172 26.4836 28.0167 26.3696 28.5564L31.9922 29.9687ZM29.5312 1.0334C30.1351 1.0334 30.6991 1.14823 31.2231 1.37787C31.7472 1.60752 32.2144 1.92328 32.6245 2.32516C33.0347 2.72704 33.348 3.19207 33.5645 3.72025C33.7809 4.24843 33.8949 4.82255 33.9062 5.44259C33.9062 6.02818 33.798 6.59081 33.5815 7.13048C33.3651 7.67015 33.0461 8.14666 32.6245 8.56002L13.0396 28.298C12.937 28.9755 12.7262 29.5955 12.4072 30.1581C12.0882 30.7208 11.6895 31.2203 11.2109 31.6566C10.7324 32.0929 10.1912 32.4201 9.5874 32.6383C8.98356 32.8565 8.33984 32.977 7.65625 33H0V30.7954C0.125326 30.7954 0.256348 30.7782 0.393066 30.7437C0.529785 30.7093 0.655111 30.6576 0.769043 30.5887C1.05387 30.4395 1.28743 30.25 1.46973 30.0204C1.65202 29.7907 1.79443 29.5381 1.89697 29.2625C1.99951 28.987 2.07357 28.6999 2.11914 28.4014C2.16471 28.1028 2.1875 27.7985 2.1875 27.4885C2.1875 26.8111 2.30143 26.1681 2.5293 25.5595C2.75716 24.9509 3.08757 24.3998 3.52051 23.9061C3.95345 23.4123 4.44336 23.0104 4.99023 22.7004C5.53711 22.3904 6.15804 22.178 6.85303 22.0632L26.438 2.32516C26.8481 1.9118 27.321 1.59603 27.8564 1.37787C28.3919 1.15971 28.9502 1.04489 29.5312 1.0334ZM7.65625 30.7954C8.11198 30.7954 8.53923 30.7093 8.93799 30.5371C9.33675 30.3648 9.68425 30.1294 9.98047 29.8309C10.2767 29.5324 10.5103 29.1822 10.6812 28.7803C10.8521 28.3784 10.9375 27.9478 10.9375 27.4885C10.9375 27.0292 10.8521 26.5986 10.6812 26.1968C10.5103 25.7949 10.2767 25.4447 9.98047 25.1461C9.68425 24.8476 9.33675 24.6122 8.93799 24.44C8.53923 24.2677 8.11198 24.1816 7.65625 24.1816C7.20052 24.1816 6.77327 24.2677 6.37451 24.44C5.97575 24.6122 5.62826 24.8476 5.33203 25.1461C5.03581 25.4447 4.80225 25.7949 4.63135 26.1968C4.46045 26.5986 4.375 27.0292 4.375 27.4885C4.375 28.6827 4.01042 29.785 3.28125 30.7954H7.65625ZM16.5088 21.6842C16.1442 20.9609 15.717 20.3523 15.2271 19.8586C14.7371 19.3648 14.1333 18.9342 13.4155 18.5668L9.63867 22.3732C10.3451 22.6487 10.966 23.0564 11.5015 23.596C12.0369 24.1357 12.4471 24.7672 12.7319 25.4906L16.5088 21.6842ZM31.0693 6.99269C31.4909 6.56785 31.7017 6.05115 31.7017 5.44259C31.7017 5.14405 31.6447 4.86273 31.5308 4.59864C31.4168 4.33455 31.263 4.10491 31.0693 3.90971C30.8757 3.71451 30.6421 3.55376 30.3687 3.42745C30.0952 3.30115 29.8161 3.24374 29.5312 3.25522C28.9274 3.25522 28.4147 3.46764 27.9932 3.89248L15.022 16.9478C15.717 17.3612 16.3037 17.809 16.7822 18.2912C17.2607 18.7735 17.7051 19.3648 18.1152 20.0652L31.0693 6.99269Z"
                    fill="#FFFFFF"
                    className="hidden dark:block"
                  />
                </svg>

                <span className="font-medium">
                  See Babcock&apos;s Creatives
                </span>
              </Link>

              <Link
                href={PAGES.communities}
                className="flex items-center gap-3 hover:opacity-80 transition-opacity"
              >
                <svg
                  className="w-7 h-auto text-gold dark:text-white"
                  viewBox="0 0 37 32"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M18.4968 1.99997C17.4067 1.99997 16.3612 2.42139 15.5904 3.17152C14.8195 3.92165 14.3865 4.93905 14.3865 5.9999C14.3865 7.06075 14.8195 8.07815 15.5904 8.82828C16.3612 9.57841 17.4067 9.99983 18.4968 9.99983C19.587 9.99983 20.6325 9.57841 21.4033 8.82828C22.1742 8.07815 22.6072 7.06075 22.6072 5.9999C22.6072 4.93905 22.1742 3.92165 21.4033 3.17152C20.6325 2.42139 19.587 1.99997 18.4968 1.99997ZM12.3313 5.9999C12.3313 4.40863 12.9809 2.88253 14.1371 1.75733C15.2934 0.632131 16.8616 0 18.4968 0C20.1321 0 21.7003 0.632131 22.8566 1.75733C24.0128 2.88253 24.6624 4.40863 24.6624 5.9999C24.6624 7.59117 24.0128 9.11727 22.8566 10.2425C21.7003 11.3677 20.1321 11.9998 18.4968 11.9998C16.8616 11.9998 15.2934 11.3677 14.1371 10.2425C12.9809 9.11727 12.3313 7.59117 12.3313 5.9999ZM8.32981 15.9917C8.25994 16.3171 8.225 16.6531 8.225 16.9997V18.0897L2.81779 19.4997C2.55454 19.5681 2.33001 19.7355 2.19358 19.9651C2.05714 20.1946 2.01998 20.4675 2.09025 20.7237L3.41996 25.5536C3.81009 26.9681 4.71841 28.1949 5.97373 29.0028C7.22905 29.8107 8.74468 30.1438 10.235 29.9395C10.7077 30.5595 11.2523 31.1275 11.8565 31.6255L11.5051 31.7255C10.4622 31.9977 9.37446 32.0673 8.30394 31.9304C7.23342 31.7935 6.2011 31.4527 5.26594 30.9275C4.33078 30.4023 3.51111 29.7029 2.85373 28.8694C2.19635 28.0359 1.71414 27.0845 1.43465 26.0696L0.104937 21.2396C0.00020504 20.8591 -0.0264701 20.4622 0.0264343 20.0716C0.0793387 19.681 0.210786 19.3043 0.413272 18.9632C0.615757 18.622 0.885314 18.323 1.20655 18.0832C1.52779 17.8435 1.89441 17.6676 2.28549 17.5657L8.32981 15.9917ZM28.7769 18.0897V16.9997C28.7755 16.6531 28.7413 16.3171 28.6742 15.9917L34.7164 17.5677C35.5059 17.7739 36.1788 18.2768 36.5873 18.9657C36.9959 19.6547 37.1065 20.4733 36.8949 21.2416L35.5652 26.0716C35.2777 27.1152 34.7759 28.0914 34.0902 28.9411C33.4044 29.7909 32.5488 30.4967 31.5751 31.0159C30.6013 31.5351 29.5296 31.8569 28.4246 31.9621C27.3195 32.0672 26.204 31.9533 25.1454 31.6275C25.7524 31.1261 26.2929 30.5642 26.7669 29.9415C28.2572 30.1452 29.7725 29.8115 31.0275 29.0033C32.2824 28.195 33.1902 26.9681 33.5799 25.5536L34.9117 20.7237C34.9819 20.4675 34.9448 20.1946 34.8083 19.9651C34.6719 19.7355 34.4474 19.5681 34.1841 19.4997L28.7769 18.0897ZM28.7728 8.99985C28.7728 8.20421 29.0976 7.44116 29.6757 6.87856C30.2539 6.31596 31.038 5.9999 31.8556 5.9999C32.6732 5.9999 33.4573 6.31596 34.0354 6.87856C34.6136 7.44116 34.9384 8.20421 34.9384 8.99985C34.9384 9.79548 34.6136 10.5585 34.0354 11.1211C33.4573 11.6837 32.6732 11.9998 31.8556 11.9998C31.038 11.9998 30.2539 11.6837 29.6757 11.1211C29.0976 10.5585 28.7728 9.79548 28.7728 8.99985ZM31.8556 3.99993C30.4929 3.99993 29.186 4.52671 28.2225 5.46437C27.2589 6.40204 26.7176 7.67379 26.7176 8.99985C26.7176 10.3259 27.2589 11.5977 28.2225 12.5353C29.186 13.473 30.4929 13.9998 31.8556 13.9998C33.2183 13.9998 34.5251 13.473 35.4887 12.5353C36.4522 11.5977 36.9936 10.3259 36.9936 8.99985C36.9936 7.67379 36.4522 6.40204 35.4887 5.46437C34.5251 4.52671 33.2183 3.99993 31.8556 3.99993ZM5.1381 5.9999C4.32049 5.9999 3.53638 6.31596 2.95824 6.87856C2.38011 7.44116 2.05531 8.20421 2.05531 8.99985C2.05531 9.79548 2.38011 10.5585 2.95824 11.1211C3.53638 11.6837 4.32049 11.9998 5.1381 11.9998C5.95571 11.9998 6.73983 11.6837 7.31796 11.1211C7.8961 10.5585 8.22089 9.79548 8.22089 8.99985C8.22089 8.20421 7.8961 7.44116 7.31796 6.87856C6.73983 6.31596 5.95571 5.9999 5.1381 5.9999ZM0.000121763 8.99985C0.000121763 7.67379 0.541443 6.40204 1.505 5.46437C2.46856 4.52671 3.77542 3.99993 5.1381 3.99993C6.50078 3.99993 7.80764 4.52671 8.7712 5.46437C9.73476 6.40204 10.2761 7.67379 10.2761 8.99985C10.2761 10.3259 9.73476 11.5977 8.7712 12.5353C7.80764 13.473 6.50078 13.9998 5.1381 13.9998C3.77542 13.9998 2.46856 13.473 1.505 12.5353C0.541443 11.5977 0.000121763 10.3259 0.000121763 8.99985ZM13.3589 13.9998C12.5413 13.9998 11.7571 14.3158 11.179 14.8784C10.6009 15.441 10.2761 16.2041 10.2761 16.9997V23.9996C10.2761 26.1213 11.1422 28.1561 12.6839 29.6564C14.2256 31.1566 16.3166 31.9995 18.4968 31.9995C20.6771 31.9995 22.7681 31.1566 24.3098 29.6564C25.8515 28.1561 26.7176 26.1213 26.7176 23.9996V16.9997C26.7176 16.2041 26.3928 15.441 25.8147 14.8784C25.2365 14.3158 24.4524 13.9998 23.6348 13.9998H13.3589ZM12.3313 16.9997C12.3313 16.7345 12.4395 16.4802 12.6322 16.2926C12.825 16.1051 13.0863 15.9997 13.3589 15.9997H23.6348C23.9074 15.9997 24.1687 16.1051 24.3614 16.2926C24.5542 16.4802 24.6624 16.7345 24.6624 16.9997V23.9996C24.6624 25.5909 24.0128 27.117 22.8566 28.2422C21.7003 29.3674 20.1321 29.9995 18.4968 29.9995C16.8616 29.9995 15.2934 29.3674 14.1371 28.2422C12.9809 27.117 12.3313 25.5909 12.3313 23.9996V16.9997Z"
                    fill="#A98105"
                    className="dark:hidden"
                  />
                  <path
                    d="M18.4968 1.99997C17.4067 1.99997 16.3612 2.42139 15.5904 3.17152C14.8195 3.92165 14.3865 4.93905 14.3865 5.9999C14.3865 7.06075 14.8195 8.07815 15.5904 8.82828C16.3612 9.57841 17.4067 9.99983 18.4968 9.99983C19.587 9.99983 20.6325 9.57841 21.4033 8.82828C22.1742 8.07815 22.6072 7.06075 22.6072 5.9999C22.6072 4.93905 22.1742 3.92165 21.4033 3.17152C20.6325 2.42139 19.587 1.99997 18.4968 1.99997ZM12.3313 5.9999C12.3313 4.40863 12.9809 2.88253 14.1371 1.75733C15.2934 0.632131 16.8616 0 18.4968 0C20.1321 0 21.7003 0.632131 22.8566 1.75733C24.0128 2.88253 24.6624 4.40863 24.6624 5.9999C24.6624 7.59117 24.0128 9.11727 22.8566 10.2425C21.7003 11.3677 20.1321 11.9998 18.4968 11.9998C16.8616 11.9998 15.2934 11.3677 14.1371 10.2425C12.9809 9.11727 12.3313 7.59117 12.3313 5.9999ZM8.32981 15.9917C8.25994 16.3171 8.225 16.6531 8.225 16.9997V18.0897L2.81779 19.4997C2.55454 19.5681 2.33001 19.7355 2.19358 19.9651C2.05714 20.1946 2.01998 20.4675 2.09025 20.7237L3.41996 25.5536C3.81009 26.9681 4.71841 28.1949 5.97373 29.0028C7.22905 29.8107 8.74468 30.1438 10.235 29.9395C10.7077 30.5595 11.2523 31.1275 11.8565 31.6255L11.5051 31.7255C10.4622 31.9977 9.37446 32.0673 8.30394 31.9304C7.23342 31.7935 6.2011 31.4527 5.26594 30.9275C4.33078 30.4023 3.51111 29.7029 2.85373 28.8694C2.19635 28.0359 1.71414 27.0845 1.43465 26.0696L0.104937 21.2396C0.00020504 20.8591 -0.0264701 20.4622 0.0264343 20.0716C0.0793387 19.681 0.210786 19.3043 0.413272 18.9632C0.615757 18.622 0.885314 18.323 1.20655 18.0832C1.52779 17.8435 1.89441 17.6676 2.28549 17.5657L8.32981 15.9917ZM28.7769 18.0897V16.9997C28.7755 16.6531 28.7413 16.3171 28.6742 15.9917L34.7164 17.5677C35.5059 17.7739 36.1788 18.2768 36.5873 18.9657C36.9959 19.6547 37.1065 20.4733 36.8949 21.2416L35.5652 26.0716C35.2777 27.1152 34.7759 28.0914 34.0902 28.9411C33.4044 29.7909 32.5488 30.4967 31.5751 31.0159C30.6013 31.5351 29.5296 31.8569 28.4246 31.9621C27.3195 32.0672 26.204 31.9533 25.1454 31.6275C25.7524 31.1261 26.2929 30.5642 26.7669 29.9415C28.2572 30.1452 29.7725 29.8115 31.0275 29.0033C32.2824 28.195 33.1902 26.9681 33.5799 25.5536L34.9117 20.7237C34.9819 20.4675 34.9448 20.1946 34.8083 19.9651C34.6719 19.7355 34.4474 19.5681 34.1841 19.4997L28.7769 18.0897ZM28.7728 8.99985C28.7728 8.20421 29.0976 7.44116 29.6757 6.87856C30.2539 6.31596 31.038 5.9999 31.8556 5.9999C32.6732 5.9999 33.4573 6.31596 34.0354 6.87856C34.6136 7.44116 34.9384 8.20421 34.9384 8.99985C34.9384 9.79548 34.6136 10.5585 34.0354 11.1211C33.4573 11.6837 32.6732 11.9998 31.8556 11.9998C31.038 11.9998 30.2539 11.6837 29.6757 11.1211C29.0976 10.5585 28.7728 9.79548 28.7728 8.99985ZM31.8556 3.99993C30.4929 3.99993 29.186 4.52671 28.2225 5.46437C27.2589 6.40204 26.7176 7.67379 26.7176 8.99985C26.7176 10.3259 27.2589 11.5977 28.2225 12.5353C29.186 13.473 30.4929 13.9998 31.8556 13.9998C33.2183 13.9998 34.5251 13.473 35.4887 12.5353C36.4522 11.5977 36.9936 10.3259 36.9936 8.99985C36.9936 7.67379 36.4522 6.40204 35.4887 5.46437C34.5251 4.52671 33.2183 3.99993 31.8556 3.99993ZM5.1381 5.9999C4.32049 5.9999 3.53638 6.31596 2.95824 6.87856C2.38011 7.44116 2.05531 8.20421 2.05531 8.99985C2.05531 9.79548 2.38011 10.5585 2.95824 11.1211C3.53638 11.6837 4.32049 11.9998 5.1381 11.9998C5.95571 11.9998 6.73983 11.6837 7.31796 11.1211C7.8961 10.5585 8.22089 9.79548 8.22089 8.99985C8.22089 8.20421 7.8961 7.44116 7.31796 6.87856C6.73983 6.31596 5.95571 5.9999 5.1381 5.9999ZM0.000121763 8.99985C0.000121763 7.67379 0.541443 6.40204 1.505 5.46437C2.46856 4.52671 3.77542 3.99993 5.1381 3.99993C6.50078 3.99993 7.80764 4.52671 8.7712 5.46437C9.73476 6.40204 10.2761 7.67379 10.2761 8.99985C10.2761 10.3259 9.73476 11.5977 8.7712 12.5353C7.80764 13.473 6.50078 13.9998 5.1381 13.9998C3.77542 13.9998 2.46856 13.473 1.505 12.5353C0.541443 11.5977 0.000121763 10.3259 0.000121763 8.99985ZM13.3589 13.9998C12.5413 13.9998 11.7571 14.3158 11.179 14.8784C10.6009 15.441 10.2761 16.2041 10.2761 16.9997V23.9996C10.2761 26.1213 11.1422 28.1561 12.6839 29.6564C14.2256 31.1566 16.3166 31.9995 18.4968 31.9995C20.6771 31.9995 22.7681 31.1566 24.3098 29.6564C25.8515 28.1561 26.7176 26.1213 26.7176 23.9996V16.9997C26.7176 16.2041 26.3928 15.441 25.8147 14.8784C25.2365 14.3158 24.4524 13.9998 23.6348 13.9998H13.3589ZM12.3313 16.9997C12.3313 16.7345 12.4395 16.4802 12.6322 16.2926C12.825 16.1051 13.0863 15.9997 13.3589 15.9997H23.6348C23.9074 15.9997 24.1687 16.1051 24.3614 16.2926C24.5542 16.4802 24.6624 16.7345 24.6624 16.9997V23.9996C24.6624 25.5909 24.0128 27.117 22.8566 28.2422C21.7003 29.3674 20.1321 29.9995 18.4968 29.9995C16.8616 29.9995 15.2934 29.3674 14.1371 28.2422C12.9809 27.117 12.3313 25.5909 12.3313 23.9996V16.9997Z"
                    fill="#FFFFFF"
                    className="hidden dark:block"
                  />
                </svg>

                <span className="font-medium">View Communities at Babcock</span>
              </Link>
            </div>
          </div>
        )}
      </div>

      {/* Spacer to prevent content jump when small header is fixed */}
      <div
        className={cn(
          "transition-all duration-300",
          showSmallHeader ? "h-[72px]" : "h-0"
        )}
      />
    </>
  );
};

export default Header;
